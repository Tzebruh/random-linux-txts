packages for building kernel:
- git
- make
- gcc
- libncurses-dev
- flex
- bison
- bc
- libelf-dev
- libssl-dev

packages for setting up initramfs:
- busybox (just binary not package)
- vim

$ git clone --depth 1 https://github.com/torvalds/linux.git
if using existing linux source directory, git pull origin master
$ cd linux
$ make menuconfig

set your config
for efi: framebuffer needs to be enabled to get console output on the screen
enable these settings:
Device Drivers > Graphics support > Frame buffer Devices > Support for frame buffer device drivers
Device Drivers > Graphics support > Frame buffer Devices > Support for frame buffer device drivers > EFI-based Framebuffer Support
Device Drivers > Graphics support > Console display driver support > Framebuffer Console support

$ make -j 8
kernel will be in arch/x86/boot

$ cd ..
$ mkdir initramfs
$ cd initramfs
$ mkdir bin
$ cp <busybox> ./bin/busybox
$ ./bin/busybox --install ./bin/
$ vim init

content:
```
#!/bin/sh

mkdir /proc /sys

mount -t proc proc /proc
mount -t sysfs sysfs /sys
mount -t devtmpfs devtmpfs /dev

sh
poweroff -f
```

$ chmod +x init

packages for packaging initramfs:
- cpio

$ find . | cpio -o -H newc > ../init.cpio
$ cd ..

test:
$ qemu-system-x64 -kernel bzImage -initrd init.cpio
for quiet: -append "quiet"
for debugging: -append "console=ttyS0 debug"

packages for bootloader + efi iso:
- grub
- xorriso (if it's not already installed)
- mtools
- efibootmgr (maybe idk)

$ mkdir -p iso_root/boot
$ cp bzImage init.cpio iso_root/boot/
$ mkdir iso_root/boot/grub
$ vim iso_root/boot/grub/grub.cfg

content:
```
set timeout=5
set default=0

menuentry "Linuxbuild" {
	linux /boot/bzImage quiet // kernel params go here
	initrd /boot/init.cpio
}
```

$ grub-mkrescue -o boot_uefi.iso iso_root

boot_uefi.iso is the final iso file

commands to connect to network: (wired only)
check adapter name:
# ip link
replace eth0 in following commands with adapter name
# ip link set eth0 up
# ip addr add x.x.x.x/24 dev eth0
make it in the same subnet of the host network, virtualbox uses 10.0.2.x, qemu uses 192.168.122.x
# ip route add default via x.x.x.x
use your network's gateway (router) address, virtualbox uses 10.0.2.2, qemu uses 192.168.122.1
# mkdir /etc
# echo "nameserver 8.8.8.8" > /etc/resolv.conf

alpine linux chroot: (basically cheating at this point)
network is required
go to whatever directory you want the chroot to go to, probably on a mounted disk so you actually keep it
# wget https://dl-cdn.alpinelinux.org/alpine/v3.22/releases/x86_64/alpine-minirootfs-3.22.1-x86_64.tar.gz
# tar -xzf alpine-minirootfs-3.22.1-x86_64.tar.gz
optional:
# rm alpine-minirootfs-3.22.1-x86_64.tar.gz

# chroot .
